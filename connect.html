<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Connect | Époque Labs</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles/main.css" />
  <style>
    body { margin: 0; background:#fefaf6; color:#2b1d1a; font-family:'Inter',sans-serif; line-height:1.7; }
    header { background:#eadfd3; padding:3rem 1.5rem 2rem; text-align:center; }
    header h1 { font-family:'Playfair Display',serif; font-size:2.5rem; margin-bottom:.5rem; }
    header p { font-style:italic; font-size:1.1rem; opacity:.85; }
    .form-container { max-width:600px; margin:4rem auto; padding:0 1.5rem; }
    form { display:flex; flex-direction:column; gap:1.2rem; }
    label { font-weight:600; }
    input, textarea { padding:.8rem; border:1px solid #ccc; border-radius:6px; font-family:'Inter',sans-serif; }
    button { background:#2b1d1a; color:#fff; padding:.9rem 2rem; border:none; border-radius:40px; font-size:1rem; cursor:pointer; transition:background .3s ease; }
    button:hover { background:#3a2824; }
    footer { background:#2b1d1a; color:#fff; text-align:center; padding:2rem 1rem; font-size:.9rem; margin-top:4rem; }
    nav { background:#f3ece4; padding:1.5rem; text-align:center; }
    nav a { margin:0 .6rem; color:inherit; text-decoration:none; }
  </style>
</head>
<body>

  <header>
    <h1>Connect with Époque Labs</h1>
    <p>We welcome your inquiries, collaborations, and curiosity.</p>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="archives.html">Archives</a>
    <a href="compendium.html">Compendium</a>
    <a href="method.html">Méthode</a>
    <a href="products.html">Collection</a>
    <a href="sanctuaire.html">Sanctuaire</a>
    <a href="connect.html">Connect</a>
  </nav>

  <!-- Anchor target for smooth scroll -->
  <div id="waitlist"></div>

  <div class="form-container" style="max-width: 600px; margin: 0 auto; font-family: 'Georgia', serif;">
    <form id="contact-form" action="https://formsubmit.co/lelaabrams@gmail.com" method="POST">
      <!-- Formsubmit settings -->
      <input type="text" name="_honey" style="display:none">
      <!-- Dummy value; script will overwrite with the correct absolute URL + topic -->
      <input type="hidden" name="_next" value="">
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_template" value="table">
      <input type="hidden" name="_subject" id="subject" value="New message from Époque Labs site">
      <!-- Captured topic from URL (e.g., Scellé — Waitlist) -->
      <input type="hidden" name="topic" id="topic">

      <label for="name">Name</label>
      <input id="name" type="text" name="name" autocomplete="name" required style="width:100%; padding:10px; margin-bottom:15px;">

      <label for="email">Email</label>
      <input id="email" type="email" name="_replyto" autocomplete="email" required style="width:100%; padding:10px; margin-bottom:15px;">

      <label for="message">Message or Interest</label>
      <textarea id="message" name="message" rows="5" required style="width:100%; padding:10px; margin-bottom:20px;"></textarea>

      <button class="btn primary" type="submit">Send Message</button>
    </form>
  </div>

  <footer>
    © 2025 Époque Labs LLC · All rights reserved.  
    Époquelle™, La Méthode Émile™, and Compendium d’Aragon™ are protected trademarks.
  </footer>

  <!-- Prefill + dynamic thank-you redirect based on ?topic=... -->
  <script>
    (function () {
      const params = new URLSearchParams(location.search);
      const topicKey = params.get("topic"); // e.g., scelle-waitlist, hydroferme-waitlist

      // Map short codes to friendly labels
      const labels = {
        "scelle-waitlist": "Scellé — Waitlist",
        "hydroferme-waitlist": "Crème de l’Hydrofermé™ — Waitlist"
      };

      if (!topicKey) return;

      const label = labels[topicKey] || topicKey.replace(/-/g, " ");

      // Fill hidden topic field for FormSubmit
      const topicInput = document.getElementById("topic");
      if (topicInput) topicInput.value = label;

      // Better subject line for your inbox
      const subj = document.getElementById("subject");
      if (subj) subj.value = "[" + label + "] New submission from Époque Labs site";

      // Dynamically set the thank-you redirect with the SAME topic, using current origin
      const next = document.querySelector('input[name="_next"]');
      if (next) {
        const base = (location && location.origin) ? location.origin : "https://epoquelabs-collection.vercel.app";
        next.value = base + "/thank-you.html?topic=" + encodeURIComponent(topicKey);
      }

      // Tweak header + prefill message
      const h1 = document.querySelector("header h1");
      if (h1) h1.textContent = "Join the " + label;

      const p = document.querySelector("header p");
      if (p) p.textContent = "We saved you a place. Add your name and email below.";

      const msg = document.getElementById("message");
      if (msg && !msg.value) {
        msg.value = "Please add me to the " + label + ".";
      }

      // Smooth scroll to the form anchor
      const anchor = document.getElementById("waitlist");
      if (anchor) anchor.scrollIntoView({ behavior: "smooth", block: "start" });
    })();
  </script>
</body>
</html>

